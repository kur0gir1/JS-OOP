<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Employee Inheritance</title>

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Bootstrap Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">

  <!-- Custom CSS -->
  <link rel="stylesheet" href="style.css">

</head>

<body class="bg-dark text-light">
  <div class="container my-5">
    <h1 class="text-center mb-5">
      <i class="bi bi-people-fill me-2"></i>
      Employee Inheritance System
    </h1>

    <!-- Search Box -->
    <div class="mb-4 input-group">
      <span class="input-group-text bg-dark text-light border-secondary"><i class="bi bi-search"></i></span>
      <input type="search" class="form-control bg-dark text-light" id="search-employees" placeholder="Search employees by name, job title, or address...">
    </div>

    <!-- Add Employee Form -->
    <div class="card text-bg-dark border-light mb-5">
      <div class="card-header">
        <h4><i class="bi bi-person-plus-fill me-2"></i>Add New Employee</h4>
      </div>
      <div class="card-body">
        <form id="add-employee-form">
          <div class="row mb-3">
            <div class="col-md-6">
              <label for="name" class="form-label"><i class="bi bi-person-badge me-1"></i>Name</label>
              <div class="input-group">
                <span class="input-group-text bg-dark text-light border-secondary"><i class="bi bi-person"></i></span>
                <input type="text" class="form-control bg-dark text-light" id="name" required>
              </div>
            </div>
            <div class="col-md-6">
              <label for="age" class="form-label"><i class="bi bi-calendar-date me-1"></i>Age</label>
              <div class="input-group">
                <span class="input-group-text bg-dark text-light border-secondary"><i class="bi bi-123"></i></span>
                <input type="number" class="form-control bg-dark text-light" id="age" min="18" max="80" required>
              </div>
            </div>
          </div>
          <div class="row mb-3">
            <div class="col-md-6">
              <label for="address" class="form-label"><i class="bi bi-geo-alt me-1"></i>Address</label>
              <div class="input-group">
                <span class="input-group-text bg-dark text-light border-secondary"><i class="bi bi-house"></i></span>
                <input type="text" class="form-control bg-dark text-light" id="address" required>
              </div>
            </div>
            <div class="col-md-6">
              <label for="salary" class="form-label"><i class="bi bi-cash-coin me-1"></i>Salary</label>
              <div class="input-group">
                <span class="input-group-text bg-dark text-light border-secondary">₱</span>
                <input type="number" class="form-control bg-dark text-light" id="salary" min="0" required>
              </div>
            </div>
          </div>
          <div class="row mb-3">
            <div class="col-md-6">
              <label for="employee-type" class="form-label"><i class="bi bi-diagram-3 me-1"></i>Employee Type</label>
              <div class="input-group">
                <span class="input-group-text bg-dark text-light border-secondary"><i
                    class="bi bi-person-badge"></i></span>
                <select class="form-select bg-dark text-light" id="employee-type" required>
                  <option value="Manager" selected hidden disabled>Employee</option>
                  <option value="Manager">Manager</option>
                  <option value="Developer">Developer</option>
                  <option value="Programmer">Programmer</option>
                </select>
              </div>
            </div>
            <div class="col-md-6">
              <label for="job-title" class="form-label"><i class="bi bi-briefcase me-1"></i>Job Title</label>
              <div class="input-group">
                <span class="input-group-text bg-dark text-light border-secondary"><i class="bi bi-award"></i></span>
                <input type="text" class="form-control bg-dark text-light" id="job-title" required>
              </div>
            </div>
          </div>
          <div class="d-flex gap-2">
            <button type="submit" class="btn btn-primary"><i class="bi bi-person-plus me-1"></i>Add Employee</button>
            <button type="reset" class="btn btn-outline-secondary"><i class="bi bi-x-circle me-1"></i>Clear
              Form</button>
          </div>
        </form>
      </div>
    </div>

    <div class="row" id="employee-cards">
      <!-- Cards will be inserted here by JavaScript -->
    </div>
  </div>

  <!-- Card Template -->
  <template id="employee-card-template">
    <div class="col-lg-4 col-md-6 mb-4">
      <div class="card text-bg-dark border-light h-100">
        <span class="employee-type-badge"></span>        <div class="card-header employee-title"></div>
        <div class="card-body">
          <div class="d-flex align-items-center mb-3">
            <div class="profile-image-container me-3">
              <div class="profile-image d-flex align-items-center justify-content-center">
                <i class="bi bi-person-circle profile-icon"></i>
              </div>
              <button class="btn btn-sm btn-outline-light mt-1 change-profile-btn w-100">
                <i class="bi bi-camera"></i> Change
              </button>
            </div>
            <h5 class="card-title employee-name mb-0"></h5>
          </div>
          <p class="card-text">
            <i class="bi bi-calendar-date me-1"></i> <strong>Age:</strong> <span class="employee-age"></span><br>
            <i class="bi bi-geo-alt me-1"></i> <strong>Address:</strong> <span class="employee-address"></span><br>
            <i class="bi bi-cash-stack me-1"></i> <strong>Salary:</strong> ₱<span class="employee-salary"></span><br>
            <i class="bi bi-currency-dollar me-1"></i> <strong>Bonus:</strong> <span
              class="badge bg-success badge-bonus">₱<span class="employee-bonus"></span></span><br>
          </p>
          <hr>
          <p class="card-text">
            <i class="bi bi-graph-up-arrow me-1"></i> <strong>Performance:</strong> <span
              class="employee-performance"></span><br>
            <i class="bi bi-kanban me-1"></i> <strong>Project Status:</strong> <span class="employee-project"></span>
          </p>
        </div>
        <div class="card-footer">
          <small class="text-body-secondary"><i class="bi bi-person-badge me-1"></i>Employee Type: <span
              class="employee-type"></span></small>
        </div>
      </div>
    </div>
  </template>

  <!-- Profile Picture Modal -->
  <div class="modal fade" id="profileModal" tabindex="-1" aria-labelledby="profileModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content bg-dark text-light border-light">
        <div class="modal-header">
          <h5 class="modal-title" id="profileModalLabel">Change Profile</h5>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <h6>Profile Color</h6>
          <div class="d-flex flex-wrap gap-2 mb-4">
            <div class="profile-color-option profile-color-1" data-color="profile-color-1" style="width:50px; height:50px; border-radius:50%; cursor:pointer;"></div>
            <div class="profile-color-option profile-color-2" data-color="profile-color-2" style="width:50px; height:50px; border-radius:50%; cursor:pointer;"></div>
            <div class="profile-color-option profile-color-3" data-color="profile-color-3" style="width:50px; height:50px; border-radius:50%; cursor:pointer;"></div>
            <div class="profile-color-option profile-color-4" data-color="profile-color-4" style="width:50px; height:50px; border-radius:50%; cursor:pointer;"></div>
            <div class="profile-color-option profile-color-5" data-color="profile-color-5" style="width:50px; height:50px; border-radius:50%; cursor:pointer;"></div>
            <div class="profile-color-option profile-color-6" data-color="profile-color-6" style="width:50px; height:50px; border-radius:50%; cursor:pointer;"></div>
          </div>
          
          <h6>Profile Icon</h6>
          <div class="d-flex flex-wrap gap-3 mb-3">
            <button class="btn btn-outline-light profile-icon-option" data-icon="bi-person">
              <i class="bi bi-person"></i>
            </button>
            <button class="btn btn-outline-light profile-icon-option" data-icon="bi-briefcase">
              <i class="bi bi-briefcase"></i>
            </button>
            <button class="btn btn-outline-light profile-icon-option" data-icon="bi-code-square">
              <i class="bi bi-code-square"></i>
            </button>
            <button class="btn btn-outline-light profile-icon-option" data-icon="bi-terminal">
              <i class="bi bi-terminal"></i>
            </button>
            <button class="btn btn-outline-light profile-icon-option" data-icon="bi-cpu">
              <i class="bi bi-cpu"></i>
            </button>
            <button class="btn btn-outline-light profile-icon-option" data-icon="bi-star">
              <i class="bi bi-star"></i>
            </button>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-primary" id="save-profile">Save changes</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

  <!-- App Script -->
  <script src="app.js"></script>

  <!-- Profile Script -->
  <script src="profile.js"></script>  

  <script>
    // Display employees in cards
    document.addEventListener('DOMContentLoaded', () => {
      const employeeCards = document.getElementById('employee-cards');
      const template = document.getElementById('employee-card-template');
      const addEmployeeForm = document.getElementById('add-employee-form');
      const searchBox = document.getElementById('search-employees');

      // Function to render employee card
      window.renderEmployeeCard = function(emp) {
        const employeeData = emp.getEmployee();
        const card = template.content.cloneNode(true);
        const empType = emp.constructor.name.toLowerCase();

        // Fill in employee data
        card.querySelector('.employee-title').textContent = employeeData.jobTitle;
        card.querySelector('.employee-title').classList.add(empType);
        card.querySelector('.employee-name').textContent = employeeData.name;
        card.querySelector('.employee-age').textContent = employeeData.age;
        card.querySelector('.employee-address').textContent = employeeData.address;
        card.querySelector('.employee-salary').textContent = employeeData.salary.toLocaleString();
        card.querySelector('.employee-bonus').textContent = emp.calculateBonus().toLocaleString();
        card.querySelector('.employee-performance').textContent = emp.performanceTracker();
        card.querySelector('.employee-project').textContent = emp.manageProjects();
        card.querySelector('.employee-type').textContent = emp.constructor.name;

        // Add type badge
        const typeBadge = card.querySelector('.employee-type-badge');
        typeBadge.classList.add('badge');

        switch (empType) {
          case 'manager':
            typeBadge.classList.add('bg-warning', 'text-dark');
            typeBadge.textContent = 'Manager';
            break;
          case 'developer':
            typeBadge.classList.add('bg-primary');
            typeBadge.textContent = 'Developer';
            break;
          case 'programmer':
            typeBadge.classList.add('bg-success');
            typeBadge.textContent = 'Programmer';
            break;
        }
        
        // Set profile picture and color
        const profileImage = card.querySelector('.profile-image');
        const profileIcon = card.querySelector('.profile-icon');
        
        if (employeeData.profileColor) {
          profileImage.classList.add(employeeData.profileColor);
        }
        
        if (employeeData.profileIcon) {
          profileIcon.classList.remove('bi-person-circle');
          profileIcon.classList.add(employeeData.profileIcon);
        }
        
        // Attach click event to Change Profile button
        const changeProfileBtn = card.querySelector('.change-profile-btn');
        const cardElement = card.querySelector('.card');
        
        changeProfileBtn.addEventListener('click', function() {
          // Store reference to employee and card
          const profileModal = document.getElementById('profileModal');
          const bsModal = new bootstrap.Modal(profileModal);
          
          // Clear previous selections
          document.querySelectorAll('.profile-color-option').forEach(option => {
            option.style.border = 'none';
          });
          document.querySelectorAll('.profile-icon-option').forEach(option => {
            option.classList.remove('active');
          });
          
          // Mark current selections
          const currentColor = employeeData.profileColor;
          const currentIcon = employeeData.profileIcon;
          
          if (currentColor) {
            const colorOption = document.querySelector(`.profile-color-option[data-color="${currentColor}"]`);
            if (colorOption) colorOption.style.border = '3px solid white';
          }
          
          if (currentIcon) {
            const iconOption = document.querySelector(`.profile-icon-option[data-icon="${currentIcon}"]`);
            if (iconOption) iconOption.classList.add('active');
          }
          
          // Handle color selection
          document.querySelectorAll('.profile-color-option').forEach(option => {
            option.onclick = function() {
              document.querySelectorAll('.profile-color-option').forEach(opt => {
                opt.style.border = 'none';
              });
              this.style.border = '3px solid white';
            };
          });
          
          // Handle save button click
          const saveBtn = document.getElementById('save-profile');
          
          saveBtn.onclick = function() {
            const selectedColor = document.querySelector('.profile-color-option[style*="border: 3px solid white"]');
            const selectedIcon = document.querySelector('.profile-icon-option.active');
            
            let newColor = selectedColor ? selectedColor.dataset.color : null;
            let newIcon = selectedIcon ? selectedIcon.dataset.icon : null;
            
            // Update the employee object
            if (newColor) emp.setProfileColor(newColor);
            if (newIcon) emp.setProfileIcon(newIcon);
            
            // Update the card
            const cardProfileImage = cardElement.querySelector('.profile-image');
            const cardProfileIcon = cardElement.querySelector('.profile-icon');
            
            // Remove all color classes
            ['profile-color-1', 'profile-color-2', 'profile-color-3', 
              'profile-color-4', 'profile-color-5', 'profile-color-6'].forEach(cls => {
              cardProfileImage.classList.remove(cls);
            });
            
            // Add new color class
            if (newColor) cardProfileImage.classList.add(newColor);
            
            // Update icon
            if (newIcon) {
              cardProfileIcon.className = 'bi ' + newIcon + ' profile-icon';
            }
            
            // Close modal
            bsModal.hide();
          };
          
          // Show the modal
          bsModal.show();
        });

        employeeCards.appendChild(card);
      }// Create initial employee cards
      employees.forEach(emp => renderEmployeeCard(emp));

      // Handle form submission to add new employee
      addEmployeeForm.addEventListener('submit', (e) => {
        e.preventDefault();

        const name = document.getElementById('name').value;
        const age = parseInt(document.getElementById('age').value);
        const address = document.getElementById('address').value;
        const salary = parseInt(document.getElementById('salary').value);
        const employeeType = document.getElementById('employee-type').value;
        const jobTitle = document.getElementById('job-title').value;

        // Create new employee based on selected type
        let newEmployee;
        switch (employeeType) {
          case 'Manager':
            newEmployee = new Manager(name, age, address, salary, jobTitle);
            break;
          case 'Developer':
            newEmployee = new Developer(name, age, address, salary, jobTitle);
            break;
          case 'Programmer':
            newEmployee = new Programmer(name, age, address, salary, jobTitle);
            break;
        }

        // Add to employees array
        employees.push(newEmployee);

        // Render the new employee card
        renderEmployeeCard(newEmployee);

        // Reset form
        addEmployeeForm.reset();

        // Show success alert
        const alertDiv = document.createElement('div');
        alertDiv.classList.add('alert', 'alert-success', 'mt-3');
        alertDiv.textContent = `${employeeType} ${name} added successfully!`;
        addEmployeeForm.appendChild(alertDiv);

        // Remove alert after 3 seconds
        setTimeout(() => {
          alertDiv.remove();
        }, 3000);
      });      // Add search functionality
      searchBox.addEventListener('input', (e) => {
        const searchTerm = e.target.value.toLowerCase();
        const cards = employeeCards.querySelectorAll('.col-lg-4');

        cards.forEach(card => {
          const name = card.querySelector('.employee-name').textContent.toLowerCase();
          const title = card.querySelector('.employee-title').textContent.toLowerCase();
          const address = card.querySelector('.employee-address').textContent.toLowerCase();

          if (name.includes(searchTerm) || title.includes(searchTerm) || address.includes(searchTerm)) {
            card.style.display = '';
          } else {
            card.style.display = 'none';
          }
        });
      });
      
      // Handle profile icon option clicks in modal
      document.querySelectorAll('.profile-icon-option').forEach(btn => {
        btn.addEventListener('click', function() {
          // Remove active class from all options
          document.querySelectorAll('.profile-icon-option').forEach(opt => {
            opt.classList.remove('active');
          });
          // Add active class to selected option
          this.classList.add('active');
        });
      });
    });
  </script>
</body>

</html>